# Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `./backend/` –∫–æ–¥ –±—ç–∫–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ `Dockerfile`
- `./frontend/` –∫–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ `Dockerfile`
- `docker-compose.yml` –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- `.github/workflows/deploy.yaml` CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å Docker Compose

### 1. –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤

```bash
docker compose build
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker compose up -d
```

–§—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:80`, –∞ –±—ç–∫–µ–Ω–¥ –Ω–∞ `http://localhost:8081`.

### 3. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker compose down
```

---

## üêù –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ Docker Swarm

Docker Swarm –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ —Å –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å—é –∏ –≤—ã—Å–æ–∫–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å—é.

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Swarm

```bash
docker swarm init
```

–ü–µ—Ä–µ–≤–æ–¥–∏—Ç Docker –≤ —Ä–µ–∂–∏–º Swarm –∏ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç —Ö–æ—Å—Ç –≤ —É–ø—Ä–∞–≤–ª—è—é—â–∏–π —É–∑–µ–ª.

---

### 2. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å—Ç–µ–∫–∞

```bash
docker stack deploy -c docker-compose.yml momo-store
```

Docker Swarm —Ä–∞–∑–≤–µ—Ä–Ω—ë—Ç —Å—Ç–µ–∫ —Å –∏–º–µ–Ω–µ–º `momo-store` –∏ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã.

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker service ls
```

–û—Ç–æ–±—Ä–∞–∑–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å—Ç–µ–∫–µ.

---

### 4. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker service logs momo-store_backend
```

```bash
docker service logs momo-store_frontend
```

---

### 5. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker service scale momo-store_backend=3
```

–£–≤–µ–ª–∏—á–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–ø–ª–∏–∫ —Å–µ—Ä–≤–∏—Å–∞ backend –¥–æ 3. –õ–∏–±–æ –∂–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤ `docker-compose.yml`, —É–∫–∞–∑—ã–≤–∞—è —Ç–∞–º `replicas: N`.

---

### 6. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–µ–∫–∞

```bash
docker stack rm momo-store
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç –∏ —É–¥–∞–ª–∏—Ç —Å—Ç–µ–∫.

---

## üìå –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker Swarm

| –ö–æ–º–∞–Ω–¥–∞                                                | –û–ø–∏—Å–∞–Ω–∏–µ                    |
|--------------------------------------------------------|-----------------------------|
| `docker swarm init`                                    | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Docker Swarm |
| `docker stack deploy -c docker-compose.yml momo-store` | –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Å—Ç–µ–∫          |
| `docker service ls`                                    | –°–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤             |
| `docker service logs momo-store_backend`               | –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ backend        |
| `docker service logs momo-store_frontend`              | –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ frontend       |
| `docker service scale momo-store_backend=3`            | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å backend |
| `docker stack rm momo-store`                           | –£–¥–∞–ª—è–µ—Ç —Å—Ç–µ–∫                |

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- Docker Swarm –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç overlay-—Å–µ—Ç—å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤.
- –ï—Å–ª–∏ –≤ `docker-compose.yml` —É–∫–∞–∑–∞–Ω –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `8081:8081`), –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–ø–ª–∏–∫ –±—É–¥—É—Ç
  –ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–±–∏–Ω–¥–∏—Ç—å –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –ø–æ—Ä—Ç —Ö–æ—Å—Ç–∞, —á—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É. –î–ª—è —Ä–µ—à–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `expose` –≤–º–µ—Å—Ç–æ
  `ports`, —á—Ç–æ–±—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Å–µ—Ç–∏.

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:** –≤ `docker-compose.yml` –∑–∞–¥–∞—é—Ç—Å—è –ª–∏–º–∏—Ç—ã CPU –∏ –ø–∞–º—è—Ç–∏.
- **–°–µ—Ç—å:** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è –≤ –æ–±—â—É—é —Å–µ—Ç—å —á–µ—Ä–µ–∑ `networks`.
- **–ü–æ—Ä—Ç—ã:** `ports` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞—Ä—É–∂—É.
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞:** `cap_drop` –∏ `cap_add` –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–Ω—ã–º –≤—ã–∑–æ–≤–∞–º.
- **Healthcheck:** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.
- **Trivy:** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –æ–±—Ä–∞–∑–∞—Ö.

---
